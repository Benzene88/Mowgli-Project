function areCookiesEnabled(){var e=navigator.cookieEnabled;if(e===!1)return!1;if(!document.cookie&&null===e){if(document.cookie="testcookie=1",!document.cookie)return!1;document.cookie="testcookie=; expires="+new Date(0).toUTCString()}return!0}function recentTab(){$("#recent").removeClass("hidden"),$("#handpicked").addClass("hidden"),$("#two").addClass("selected"),$("#one").removeClass("selected")}function handpickedTab(){$("#handpicked").removeClass("hidden"),$("#recent").addClass("hidden"),$("#two").removeClass("selected"),$("#one").addClass("selected")}function loginRememberSwitchToggle(){$(".long-slider").on("click",function(){var e=$("input#remember_me[type='checkbox']");"1"==e.val()?e.val("0"):e.val("1")}),$(".long-slider-viewport").on("swipe",function(e){e.stopPropagation(),$(".long-slider-toggle").prop("checked",!$(".long-slider-toggle").is(":checked"));var t=$("input#remember_me[type='checkbox']");"1"==t.val()?t.val("0"):t.val("1")})}!function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function n(e,t){var n=o(e,t)?r:i;n(e,t)}var o,i,r;"classList"in document.documentElement?(o=function(e,t){return e.classList.contains(t)},i=function(e,t){e.classList.add(t)},r=function(e,t){e.classList.remove(t)}):(o=function(e,n){return t(n).test(e.className)},i=function(e,t){o(e,t)||(e.className=e.className+" "+t)},r=function(e,n){e.className=e.className.replace(t(n)," ")});var a={hasClass:o,addClass:i,removeClass:r,toggleClass:n,has:o,add:i,remove:r,toggle:n};"function"==typeof define&&define.amd?define("classie/classie",a):e.classie=a}(window),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var o=e.prototype;o.getListeners=function(e){var t,n,o=this._getEvents();if("object"==typeof e){t={};for(n in o)o.hasOwnProperty(n)&&e.test(n)&&(t[n]=o[n])}else t=o[e]||(o[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},o.addListener=function(e,n){var o,i=this.getListenersAsObject(e),r="object"==typeof n;for(o in i)i.hasOwnProperty(o)&&t(i[o],n)===-1&&i[o].push(r?n:{listener:n,once:!1});return this},o.on=n("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=n("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,n){var o,i,r=this.getListenersAsObject(e);for(i in r)r.hasOwnProperty(i)&&(o=t(r[i],n),o!==-1&&r[i].splice(o,1));return this},o.off=n("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var o,i,r=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(o=n.length;o--;)r.call(this,t,n[o]);else for(o in t)t.hasOwnProperty(o)&&(i=t[o])&&("function"==typeof i?r.call(this,o,i):a.call(this,o,i));return this},o.removeEvent=function(e){var t,n=typeof e,o=this._getEvents();if("string"===n)delete o[e];else if("object"===n)for(t in o)o.hasOwnProperty(t)&&e.test(t)&&delete o[t];else delete this._events;return this},o.emitEvent=function(e,t){var n,o,i,r,a=this.getListenersAsObject(e);for(i in a)if(a.hasOwnProperty(i))for(o=a[i].length;o--;)n=a[i][o],r=n.listener.apply(this,t||[]),r!==this._getOnceReturnValue()&&n.once!==!0||this.removeListener(e,n.listener);return this},o.trigger=n("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){var t=document.documentElement,n=function(){};t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(t,n,o){t[n+o]=o.handleEvent?function(){var t=e.event;t.target=t.target||t.srcElement,o.handleEvent.call(o,t)}:function(){var n=e.event;n.target=n.target||n.srcElement,o.call(t,n)},t.attachEvent("on"+n,t[n+o])});var o=function(){};t.removeEventListener?o=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&(o=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(o){e[t+n]=void 0}});var i={bind:n,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",i):e.eventie=i}(this),function(e){function t(e){if(e){if("string"==typeof o[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,i=0,r=n.length;i<r;i++)if(t=n[i]+e,"string"==typeof o[t])return t}}var n="Webkit Moz ms Ms O".split(" "),o=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):e.getStyleProperty=t}(window),function(e){function t(e){var t=parseFloat(e),n=e.indexOf("%")===-1&&!isNaN(t);return n&&t}function n(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=a.length;t<n;t++){var o=a[t];e[o]=0}return e}function o(e){function o(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var o=r(e);if("none"===o.display)return n();var l={};l.width=e.offsetWidth,l.height=e.offsetHeight;for(var c=l.isBorderBox=!(!s||!o[s]||"border-box"!==o[s]),u=0,f=a.length;u<f;u++){var d=a[u],h=o[d],p=parseFloat(h);l[d]=isNaN(p)?0:p}var v=l.paddingLeft+l.paddingRight,g=l.paddingTop+l.paddingBottom,y=l.marginLeft+l.marginRight,m=l.marginTop+l.marginBottom,k=l.borderLeftWidth+l.borderRightWidth,b=l.borderTopWidth+l.borderBottomWidth,w=c&&i,$=t(o.width);$!==!1&&(l.width=$+(w?0:v+k));var C=t(o.height);return C!==!1&&(l.height=C+(w?0:g+b)),l.innerWidth=l.width-(v+k),l.innerHeight=l.height-(g+b),l.outerWidth=l.width+y,l.outerHeight=l.height+m,l}}var i,s=e("boxSizing");return function(){if(s){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[s]="border-box";var n=document.body||document.documentElement;n.appendChild(e);var o=r(e);i=200===t(o.width),n.removeChild(e)}}(),o}var i=document.defaultView,r=i&&i.getComputedStyle?function(e){return i.getComputedStyle(e,null)}:function(e){return e.currentStyle},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],o):e.getSize=o(e.getStyleProperty)}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(){}function o(o,i,a,c,u){function d(e,n){this.element="string"==typeof e?r.querySelector(e):e,this.options=t({},this.options),t(this.options,n),this._create()}function h(){return!1}function p(e,t){e.x=void 0!==t.pageX?t.pageX:t.clientX,e.y=void 0!==t.pageY?t.pageY:t.clientY}function v(e,t,n){return n=n||"round",t?Math[n](e/t)*t:e}var g=c("transform"),y=!!c("perspective");t(d.prototype,i.prototype),d.prototype.options={},d.prototype._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=t({},this.position);var e=s(this.element);"relative"!==e.position&&"absolute"!==e.position&&(this.element.style.position="relative"),this.enable(),this.setHandles()},d.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles(!0)},d.prototype.bindHandles=function(t){var n;n=e.navigator.pointerEnabled?this.bindPointer:e.navigator.msPointerEnabled?this.bindMSPointer:this.bindMouseTouch,t=void 0===t||!!t;for(var o=0,i=this.handles.length;o<i;o++){var r=this.handles[o];n.call(this,r,t)}},d.prototype.bindPointer=function(e,t){var n=t?"bind":"unbind";a[n](e,"pointerdown",this),e.style.touchAction=t?"none":""},d.prototype.bindMSPointer=function(e,t){var n=t?"bind":"unbind";a[n](e,"MSPointerDown",this),e.style.msTouchAction=t?"none":""},d.prototype.bindMouseTouch=function(e,t){var n=t?"bind":"unbind";a[n](e,"mousedown",this),a[n](e,"touchstart",this),t&&k(e)};var m="attachEvent"in r.documentElement,k=m?function(e){"IMG"===e.nodeName&&(e.ondragstart=h);for(var t=e.querySelectorAll("img"),n=0,o=t.length;n<o;n++){var i=t[n];i.ondragstart=h}}:n;d.prototype._getPosition=function(){var e=s(this.element),t=parseInt(e.left,10),n=parseInt(e.top,10);this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},d.prototype._addTransformPosition=function(e){if(g){var t=e[g];if(0===t.indexOf("matrix")){var n=t.split(","),o=0===t.indexOf("matrix3d")?12:4,i=parseInt(n[o],10),r=parseInt(n[o+1],10);this.position.x+=i,this.position.y+=r}}},d.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},d.prototype.getTouch=function(e){for(var t=0,n=e.length;t<n;t++){var o=e[t];if(o.identifier===this.pointerIdentifier)return o}},d.prototype.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this.dragStart(e,e)},d.prototype.ontouchstart=function(e){this.isDragging||this.dragStart(e,e.changedTouches[0])},d.prototype.onMSPointerDown=d.prototype.onpointerdown=function(e){this.isDragging||this.dragStart(e,e)};var b={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};d.prototype.dragStart=function(t,n){this.isEnabled&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.pointerIdentifier=void 0!==n.pointerId?n.pointerId:n.identifier,this._getPosition(),this.measureContainment(),p(this.startPoint,n),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this._bindEvents({events:b[t.type],node:t.preventDefault?e:r}),o.add(this.element,"is-dragging"),this.isDragging=!0,this.emitEvent("dragStart",[this,t,n]),this.animate())},d.prototype._bindEvents=function(e){for(var t=0,n=e.events.length;t<n;t++){var o=e.events[t];a.bind(e.node,o,this)}this._boundEvents=e},d.prototype._unbindEvents=function(){var e=this._boundEvents;if(e&&e.events){for(var t=0,n=e.events.length;t<n;t++){var o=e.events[t];a.unbind(e.node,o,this)}delete this._boundEvents}},d.prototype.measureContainment=function(){var e=this.options.containment;if(e){this.size=u(this.element);var t=this.element.getBoundingClientRect(),n=l(e)?e:"string"==typeof e?r.querySelector(e):this.element.parentNode;this.containerSize=u(n);var o=n.getBoundingClientRect();this.relativeStartPosition={x:t.left-o.left,y:t.top-o.top}}},d.prototype.onmousemove=function(e){this.dragMove(e,e)},d.prototype.onMSPointerMove=d.prototype.onpointermove=function(e){e.pointerId===this.pointerIdentifier&&this.dragMove(e,e)},d.prototype.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this.dragMove(e,t)},d.prototype.dragMove=function(e,t){p(this.dragPoint,t);var n=this.dragPoint.x-this.startPoint.x,o=this.dragPoint.y-this.startPoint.y,i=this.options.grid,r=i&&i[0],a=i&&i[1];n=v(n,r),o=v(o,a),n=this.containDrag("x",n,r),o=this.containDrag("y",o,a),n="y"===this.options.axis?0:n,o="x"===this.options.axis?0:o,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+o,this.dragPoint.x=n,this.dragPoint.y=o,this.emitEvent("dragMove",[this,e,t])},d.prototype.containDrag=function(e,t,n){if(!this.options.containment)return t;var o="x"===e?"width":"height",i=this.relativeStartPosition[e],r=v(-i,n,"ceil"),a=this.containerSize[o]-i-this.size[o];return a=v(a,n,"floor"),Math.min(a,Math.max(r,t))},d.prototype.onmouseup=function(e){this.dragEnd(e,e)},d.prototype.onMSPointerUp=d.prototype.onpointerup=function(e){e.pointerId===this.pointerIdentifier&&this.dragEnd(e,e)},d.prototype.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this.dragEnd(e,t)},d.prototype.dragEnd=function(e,t){this.isDragging=!1,delete this.pointerIdentifier,g&&(this.element.style[g]="",this.setLeftTop()),this._unbindEvents(),o.remove(this.element,"is-dragging"),this.emitEvent("dragEnd",[this,e,t])},d.prototype.onMSPointerCancel=d.prototype.onpointercancel=function(e){e.pointerId===this.pointerIdentifier&&this.dragEnd(e,e)},d.prototype.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);this.dragEnd(e,t)},d.prototype.animate=function(){if(this.isDragging){this.positionDrag();var e=this;f(function(){e.animate()})}};var w=y?function(e,t){return"translate3d( "+e+"px, "+t+"px, 0)"}:function(e,t){return"translate( "+e+"px, "+t+"px)"};return d.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},d.prototype.positionDrag=g?function(){this.element.style[g]=w(this.dragPoint.x,this.dragPoint.y)}:d.prototype.setLeftTop,d.prototype.enable=function(){this.isEnabled=!0},d.prototype.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},d.prototype.destroy=function(){this.disable(),g&&(this.element.style[g]=""),this.element.style.left="",this.element.style.top="",this.element.style.position="",this.bindHandles(!1)},d}for(var i,r=e.document,a=r.defaultView,s=a&&a.getComputedStyle?function(e){return a.getComputedStyle(e,null)}:function(e){return e.currentStyle},l="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},c=0,u="webkit moz ms o".split(" "),f=e.requestAnimationFrame,d=e.cancelAnimationFrame,h=0;h<u.length&&(!f||!d);h++)i=u[h],f=f||e[i+"RequestAnimationFrame"],d=d||e[i+"CancelAnimationFrame"]||e[i+"CancelRequestAnimationFrame"];f&&d||(f=function(t){var n=(new Date).getTime(),o=Math.max(0,16-(n-c)),i=e.setTimeout(function(){t(n+o)},o);return c=n+o,i},d=function(t){e.clearTimeout(t)}),"function"==typeof define&&define.amd?define(["classie/classie","eventEmitter/EventEmitter","eventie/eventie","get-style-property/get-style-property","get-size/get-size"],o):"object"==typeof exports?module.exports=o(require("desandro-classie"),require("wolfy87-eventemitter"),require("eventie"),require("desandro-get-style-property"),require("get-size")):e.Draggabilly=o(e.classie,e.EventEmitter,e.eventie,e.getStyleProperty,e.getSize)}(window),$(".overlay_close, .overlay").on("click",function(){$(".overlay").fadeOut()}),$(".cancelOverlay").on("click",function(e){e.preventDefault(),$(".overlay").fadeOut("slow")}),$(".modalContainer").click(function(e){e.stopPropagation()}),$(".triggerSigninOverlay").on("click",function(e){"use strict";e.preventDefault(),$(".loader").removeClass("hidden"),$.ajax({url:"/new_session_form"}).success(function(){$(".loader").addClass("hidden"),$("#overlaySignin").fadeIn("slow")})}),$("#dropdown").on("click",function(e){e.preventDefault(),$("#overlayUserSubMenu").fadeIn("slow")}),$("#triggerActiveHTMLOverlay").on("click",function(e){e.preventDefault(),$("#overlayActiveHTMLEditor").fadeIn("slow")}),$("#triggerBookPricingOverlay").on("click",function(e){e.preventDefault(),$("#bookOverlayPriceBox").fadeIn("slow")}),$("#triggerBookPriceMarkerOverlay").on("click",function(e){e.preventDefault(),$("#bookOverlayPriceMarkerBox").fadeIn("slow")}),$("#triggerBookCommissionOverlay").on("click",function(e){e.preventDefault(),$("#bookOverlayCommissionBox").fadeIn("slow")}),$("#triggerCoverSummaryOverlay").on("click",function(e){e.preventDefault(),$("#coverOverlaySummaryBox").fadeIn("slow")}),$("#triggerCoverSupportOverlay").on("click",function(e){e.preventDefault(),$("#coverOverlaySupportBox").fadeIn("slow")}),$("#triggerCoverAboutOverlay").on("click",function(e){e.preventDefault(),$("#coverOverlayAboutBox").fadeIn("slow")}),$("#triggerCoverContentsOverlay").on("click",function(e){e.preventDefault(),$("#coverOverlayContentsBox").fadeIn("slow")}),$("#triggerCoverReviewsOverlay").on("click",function(e){e.preventDefault(),$("#coverOverlayReviewsBox").fadeIn("slow")}),$("#triggerCoverAuthorDetailOverlay").on("click",function(e){e.preventDefault(),$("#coverOverlayAuthorDetailBox").fadeIn("slow")}),$("#triggerCoverColophonOverlay").on("click",function(e){e.preventDefault(),$("#coverOverlayColophonBox").fadeIn("slow")}),$("#triggerCoverTopOverlay").on("click",function(e){e.preventDefault(),$("#coverTopImageBox").fadeIn("slow")}),$("#triggerCoverBannerOverlay").on("click",function(e){e.preventDefault(),$("#coverBannerBox").fadeIn("slow")}),$(".bookPermalinkButton").on("click",function(e){e.preventDefault(),$("#bookOverlayPermalinkBox").fadeIn("slow")}),$("#triggerBookCSSConfigOverlay").on("click",function(e){e.preventDefault(),$("#bookOverlayConfigCSSBox").fadeIn("slow")}),$("#triggerBookHTMLConfigOverlay").on("click",function(e){e.preventDefault(),$("#bookOverlayConfigHTMLBox").fadeIn("slow")}),$("#triggerBookJSConfigOverlay").on("click",function(e){e.preventDefault(),$("#bookOverlayConfigJSBox").fadeIn("slow")}),$("#triggerBookHEADConfigOverlay").on("click",function(e){e.preventDefault(),$("#bookOverlayConfigHEADBox").fadeIn("slow")}),$(".triggerUserProfileImageOverlay").on("click",function(e){e.preventDefault(),$("#userProfileImageBox").fadeIn("slow")}),$("#triggerNameChangeOverlay").on("click",function(e){e.preventDefault(),$("#overlayNameChange").fadeIn("slow")}),$("#triggerEmailChangeOverlay").on("click",function(e){e.preventDefault(),$("#overlayEmailChange").fadeIn("slow")}),$("#triggerBioChangeOverlay").on("click",function(e){e.preventDefault(),$("#overlayBioChange").fadeIn("slow")}),$("#triggerAddCategoryOverlay").on("click",function(e){e.preventDefault(),$("#overlayAddCategory").fadeIn("slow")}),$("#triggerDeleteBookOverlay").on("click",function(e){e.preventDefault(),$("#overlayDeleteBook").fadeIn("slow")}),$(".triggerDeletePageOverlay").on("click",function(e){e.preventDefault(),$("#overlayDeletePage").fadeIn("slow")}),$("#triggerForgotPasswordOverlay").on("click",function(e){e.preventDefault(),$("#overlayForgotPassword").fadeIn("slow")}),$("#triggerDeactivateUserOverlay").on("click",function(e){e.preventDefault(),$("#overlayDeactivateUser").fadeIn("slow")}),$(".flash").delay(500).fadeIn("normal",function(){$(this).delay(2500).fadeOut()}),$("a.close").click(function(){$(this).parent().fadeOut()}),function(e){function t(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function o(e){for(k in w)w[k]=e[L[k]]}function i(e){var n,i,r,a,l,c;if(n=e.keyCode,t(O,n)==-1&&O.push(n),93!=n&&224!=n||(n=91),n in w){w[n]=!0;for(r in C)C[r]==n&&(s[r]=!0)}else if(o(e),s.filter.call(this,e)&&n in b)for(c=h(),a=0;a<b[n].length;a++)if(i=b[n][a],i.scope==c||"all"==i.scope){l=i.mods.length>0;for(r in w)(!w[r]&&t(i.mods,+r)>-1||w[r]&&t(i.mods,+r)==-1)&&(l=!1);(0!=i.mods.length||w[16]||w[18]||w[17]||w[91])&&!l||i.method(e,i)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function r(e){var n,o=e.keyCode,i=t(O,o);if(i>=0&&O.splice(i,1),93!=o&&224!=o||(o=91),o in w){w[o]=!1;for(n in C)C[n]==o&&(s[n]=!1)}}function a(){for(k in w)w[k]=!1;for(k in C)s[k]=!1}function s(e,t,n){var o,i;o=v(e),void 0===n&&(n=t,t="all");for(var r=0;r<o.length;r++)i=[],e=o[r].split("+"),e.length>1&&(i=g(e),e=[e[e.length-1]]),e=e[0],e=x(e),e in b||(b[e]=[]),b[e].push({shortcut:o[r],scope:t,method:n,key:o[r],mods:i})}function l(e,t){var o,i,r,a,s,l=[];for(o=v(e),a=0;a<o.length;a++){if(i=o[a].split("+"),i.length>1&&(l=g(i)),e=i[i.length-1],e=x(e),void 0===t&&(t=h()),!b[e])return;for(r=0;r<b[e].length;r++)s=b[e][r],s.scope===t&&n(s.mods,l)&&(b[e][r]={})}}function c(e){return"string"==typeof e&&(e=x(e)),t(O,e)!=-1}function u(){return O.slice(0)}function f(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)}function d(e){$=e||"all"}function h(){return $||"all"}function p(e){var t,n,o;for(t in b)for(n=b[t],o=0;o<n.length;)n[o].scope===e?n.splice(o,1):o++}function v(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),""==t[t.length-1]&&(t[t.length-2]+=","),t}function g(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=C[t[n]];return t}function y(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function m(){var t=e.key;return e.key=S,t}var k,b={},w={16:!1,18:!1,17:!1,91:!1},$="all",C={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},E={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},x=function(e){return E[e]||e.toUpperCase().charCodeAt(0)},O=[];for(k=1;k<20;k++)E["f"+k]=111+k;var L={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(k in C)s[k]=!1;y(document,"keydown",function(e){i(e)}),y(document,"keyup",r),y(window,"focus",a);var S=e.key;e.key=s,e.key.setScope=d,e.key.getScope=h,e.key.deleteScope=p,e.key.filter=f,e.key.isPressed=c,e.key.getPressedKeyCodes=u,e.key.noConflict=m,e.key.unbind=l,"undefined"!=typeof module&&(module.exports=s)}(this);var shortCuts={activate:function(){var e=!1;key("\u2318 + k, ctrl + k",function(t){t.preventDefault(t),e?($("#overlayKeyboardShortcuts").fadeOut("slow"),e=!1):($("#overlayKeyboardShortcuts").fadeIn("slow"),e=!0)}),key("\u2318 + o, ctrl + o",function(e){e.preventDefault(e);var t="/books";window.location.href=t}),key("\u2318 + g, ctrl + g, home",function(e){e.preventDefault(e);var t=$(".logo").attr("href");window.location.href=t}),key("esc",function(e){e.preventDefault(e),$(".overlay").fadeOut()}),key("\u2318 + l, ctrl + l",function(t){t.preventDefault(t),e?($("#overlaySignin").fadeOut("slow"),$("#overlayUserSubMenu").fadeOut("slow"),e=!1):($("#overlaySignin").fadeIn("slow"),$("#overlayUserSubMenu").fadeIn("slow"),e=!0)})}};if($(document).ready(function(){shortCuts.activate()}),$(function(){$(document.body).on("click",".pagination a",function(){$(".pagination").html("Loading..."),$(".loader").removeClass("hidden"),$("#tabify").length>0?history.pushState(null,"",this.href+hash):history.pushState(null,"",this.href)}),$(window).bind("popstate",function(){$("#tabify").length>0?$.getScript(location.href+hash):$.getScript(location.href)})}),$.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}}),$("#dropdown").on("click",function(e){e.preventDefault(),$(".dropdown").toggleClass("open")}),$("#tabify").length>0){var hash=window.location.hash,historyApi=!(!window.history||!history.replaceState);historyApi&&(""===hash&&(hash="#handpicked"),"#recent"===hash&&recentTab()),$("#one").on("click",function(e){e.preventDefault(),handpickedTab(),hash="#handpicked",history.pushState(null,null,hash)}),$("#two").on("click",function(e){e.preventDefault(),recentTab(),hash="#recent",history.pushState(null,null,hash)}),$(window).on("hashchange",function(){var e=location.hash;console.log(e),"#recent"===e?recentTab():handpickedTab()})}+!~-function(e,t){function n(e){var n=t.querySelector("a.logo");e?n.classList?n.classList.remove("offline"):n.removeClass("offline"):n.classList?n.classList.add("offline"):n.addClass("offline")}var o=!!e.opera||navigator.userAgent.indexOf(" OPR/")>=0,i="undefined"!=typeof InstallTrigger,r=(Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0,!!e.chrome&&!o),a=!!t.documentMode,s=t.getElementsByTagName("nav")[0];i?e.onscroll=function(){t.documentElement.scrollTop>45&&!s.classList.contains("transparent-white")?s.classList.add("transparent-white"):t.documentElement.scrollTop<=45&&s.classList.remove("transparent-white")}:a?e.onscroll=function(){e.pageYOffset>45&&!s.classList.contains("transparent-white")?s.classList.add("transparent-white"):e.pageYOffset<=45&&s.classList.remove("transparent-white")}:r?e.onscroll=function(){e.pageYOffset>45&&!s.classList.contains("transparent-white")?s.classList.add("transparent-white"):e.pageYOffset<=45&&s.classList.remove("transparent-white")}:e.onscroll=function(){t.body.scrollTop>45&&!s.classList.contains("transparent-white")?s.classList.add("transparent-white"):t.body.scrollTop<=45&&s.classList.remove("transparent-white")},e.addEventListener("load",function(){n(navigator.onLine?!0:!1)},!1),e.addEventListener("online",function(){n(!0)},!1),e.addEventListener("offline",function(){n(!1)},!1)}(this,document);var loginCookieFunction={createCookie:function(e,t,n){var o;if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()}else o="";document.cookie=e+"="+t+o+"; path=/"},readCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},eraseCookie:function(e){document.cookie=e+"=;expires=Thu, 05 Oct 1990 00:00:01 GMT;"},submitLoginCookieForm:function(){var e=!0;$("#deleteLoginCookie").on("click",function(){e=!1,$("#loginCookie").submit()}),$(".loginCookie").on("click",function(){if(e===!0){var t=$(this).find("form.submitLoginCookieForm").get(0);$(t).submit()}else e=!0})}};$(document).ready(function(){loginCookieFunction.createCookie(),loginCookieFunction.readCookie(),loginCookieFunction.submitLoginCookieForm(),loginCookieFunction.eraseCookie()}),$("#initiatePasswordReset").on("click",function(){""!==$("#username_or_email").val()?$("form#resetPasswordForm").submit():alert("Please provide your email address or username above")});